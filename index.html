<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Flue checker</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="app">
    <aside id="sidebar">
      <h2>Flue checker</h2>

      <label>
        Manufacturer
        <select id="manufacturerSelect"></select>
      </label>

      <h3>Clearances (mm)</h3>
      <div id="clearanceFields"></div>

      <h3>Paint tool</h3>
      <div id="tools">
        <button data-tool="window-fabric">Window – fabric (150)</button>
        <button data-tool="window-opening">Window – opening (300)</button>
        <button data-tool="door">Door</button>
        <button data-tool="eaves">Eaves</button>
        <button data-tool="gutter">Gutter</button>
        <button data-tool="downpipe">Downpipe</button>
        <button data-tool="boundary">Boundary</button>
        <button data-tool="flue" class="primary">Flue ellipse</button>
        <button id="undoBtn">Undo</button>
        <small>Tap two points to create a line. Drag the square handles to adjust.</small>
      </div>

      <div id="flueSizeBtns">
        <button data-flue-mm="100" class="active">100 mm</button>
        <button data-flue-mm="125">125 mm</button>
      </div>

      <label>
        Plume tube (mm)
        <input type="number" id="plumeMm" value="60" />
      </label>

      <input type="file" id="bgUpload" accept="image/*" />

    </aside>
    <main>
      <div id="canvasWrapper">
        <canvas id="sceneCanvas" width="900" height="600"></canvas>
      </div>

      <div class="download-actions">
        <button id="downloadMarkedBtn" disabled>Download marked-up photo</button>
      </div>

      <div class="ai-actions">
        <button id="aiHighlightBtn" class="primary">AI: highlight concerns</button>
        <p id="aiStatus" class="ai-status" role="status" aria-live="polite"></p>
      </div>

      <div class="previews">
        <div>
          <h3>Option A: move flue</h3>
          <canvas id="optA" width="320" height="240"></canvas>
          <div class="download-actions">
            <button id="downloadOptABtn" disabled>Download Option A</button>
          </div>
        </div>
        <div>
          <h3>Option B: plume kit</h3>
          <canvas id="optB" width="320" height="240"></canvas>
          <div class="download-actions">
            <button id="downloadOptBBtn" disabled>Download Option B</button>
          </div>
        </div>
      </div>

      <h3>Checks</h3>
      <table id="resultsTable">
        <thead>
          <tr>
            <th>Object</th><th>Rule</th><th>Req (mm)</th><th>Actual (mm)</th><th>OK?</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </main>
  </div>

  <script type="module" src="app.js"></script>
</body>
</html>
